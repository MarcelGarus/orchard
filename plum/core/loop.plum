export
  loop s (\ s -> (| break: r continue: s)) -> r

loop initial_state: s body: (\ s -> (| break: r continue: s)) -> r =
  body initial_state
  % break: result -> result
    continue: next -> loop next body
