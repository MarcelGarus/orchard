import mod.mar

var waffle_dag = dag[WaffleExpr]().put_on_heap()

fun create(expr: WaffleExpr): WaffleId {
  WaffleId { id = waffle_dag.put(expr) }
}

fun update(id: WaffleId, expr: WaffleExpr) {
  waffle_dag.nodes.&.set(id.id.index, expr)
}

fun resolve(id: WaffleId): WaffleExpr {
  waffle_dag.get(id.id)
}
