import mod.mar

fun count_expressions(egg: Egg): Int {
  var count = 0
  for fun_ in egg.funs do fun_.value.visit(Counter { value = count.& })
  count
}

struct Counter { value: &Int }

fun visit(id: EggId, counter: Counter) {
  counter.value += 1
  id.visit_children(counter)
}
