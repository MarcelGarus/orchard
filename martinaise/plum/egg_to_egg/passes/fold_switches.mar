import mod.mar

fun fold_switches(id: EggId, builder: &EggBodyBuilder): EggId {
  var switch_ = id.resolve().switch_ or return id

  if switch_.condition.resolve() is enum_(enum_) then
    return switch_.cases.get(enum_.variant).fill(enum_.payload, builder)

  id
}
