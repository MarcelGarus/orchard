import mod.mar

fun lower_divide_and_modulo_checks(id: EggId, builder: &EggBodyBuilder): EggId {
  switch id.resolve()
  case divide(args) {
    builder.assert_is_not_equal(args.b, builder.int(0), "divide by zero")
    builder.unchecked_divide(args.a, args.b)
  }
  case modulo(args) {
    builder.assert_is_not_equal(args.b, builder.int(0), "modulo by zero")
    builder.unchecked_modulo(args.a, args.b)
  }
  default id
}
