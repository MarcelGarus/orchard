import mod.mar

fun lower_strings(id: EggId, builder: &EggBodyBuilder): EggId {
  var string = id.resolve().string or return id
  builder.desugared_string(string)
}

fun desugared_string(builder: &EggBodyBuilder, string: String): EggId {
  var bytes = list[EggId]()
  for byte in string.bytes() do bytes.&.push(builder.byte(byte))
  builder.struct_(map(
    "utf8_bytes" -> builder.array(bytes.to_slice(), type_byte),
  ))
}
