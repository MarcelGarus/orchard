
enum PestoType {
  byte,
  int,
  ptr,
  struct_: Map[String, PestoType],
  enum_: Map[String, PestoType],
  never,
}

var pesto_nothing_type = PestoType.struct_(map[String, PestoType]())

var pesto_array_type = PestoType.struct_(map[String, PestoType](
  "buffer" -> PestoType.ptr,
  "start" -> PestoType.int,
  "len" -> PestoType.int,
))

var pesto_lambda_type = PestoType.struct_(map(
  "closure" -> PestoType.ptr,
  "body" -> PestoType.ptr,
  "free" -> PestoType.ptr,
))
