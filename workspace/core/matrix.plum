import
  "..array" Array t, generate_array Int (\ Int -> t)
  "..int" Int, * Int Int, mod Int Int, / Int Int

Matrix t = & cells: (Array t) width: Int height: Int

generate_matrix width: Int height: Int generator: (\ Int Int -> t) -> (Matrix t)
= & cells:
      generate_array
        width .* height
        \ i: Int -> generator (i .mod width) (i ./ width)
    width
    height
